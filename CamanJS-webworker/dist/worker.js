// Generated by CoffeeScript 1.9.1
(function() {
  var parse;

  parse = function(str) {
    return JSON.parse(str, function(key, value) {
      var prefix;
      prefix = value.substring(0, 8);
      if (prefix === 'function') {
        return eval('(' + value + ')');
      }
      return value;
    });
  };


  /* TODO
  - add pixel.coffee functions here
  - edit filters to manipulate arraybuffers instead of contexts
  - edit filters to not access function context (this.*)
  - return altered array buffer
   */

  self.addEventListener('message', function(e) {
    var filter;
    if (typeof e.data === 'string') {
      filter = parse(e.data);
    } else {
      console.log('image data');
    }
    return self.postMessage('worker done');
  });

}).call(this);
